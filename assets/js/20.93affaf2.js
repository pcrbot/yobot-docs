(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{383:function(t,s,a){"use strict";a.r(s);var o=a(27),e=Object(o.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"使用-docker-自动脚本部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-docker-自动脚本部署"}},[t._v("#")]),t._v(" 使用 Docker 自动脚本部署")]),t._v(" "),a("p",[t._v("如果想手动部署请参考"),a("RouterLink",{attrs:{to:"/install/Linux-gocqhttp.html"}},[t._v("部署说明")])],1),t._v(" "),a("h2",{attrs:{id:"一键部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一键部署"}},[t._v("#")]),t._v(" 一键部署")]),t._v(" "),a("p",[t._v("在合适的路径执行，一键部署 "),a("code",[t._v("yobot")]),t._v(" 与 "),a("code",[t._v("gocqhttp")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" -c "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" -sL get.yobot.win"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v('"')]),t._v("\n")])])]),a("p",[t._v("如果需要单独使用 "),a("code",[t._v("yobot")]),t._v(" 镜像，请参考"),a("RouterLink",{attrs:{to:"/install/docker.html"}},[t._v("yobot镜像")])],1),t._v(" "),a("p",[t._v("注意：")]),t._v(" "),a("ul",[a("li",[t._v("CentOS 8 需要手动安装 docker 后才能使用此脚本，新手推荐使用 Ubuntu。")]),t._v(" "),a("li",[t._v("此脚本会从美国服务器下载文件，国内服务器使用此脚本可能速度较慢。")]),t._v(" "),a("li",[t._v("脚本执行完毕后，可能会出现登录验证，请按照提示完成验证。")]),t._v(" "),a("li",[t._v("登录成功后，按下 "),a("code",[t._v("ctrl-P , ctrl-Q")]),t._v(" 连续组合键挂起容器。")])]),t._v(" "),a("details",[a("summary",[t._v("这个脚本做了什么？（点击展开）")]),t._v(" "),a("ol",[a("li",[t._v("如果没有 docker 则安装 docker")]),t._v(" "),a("li",[t._v("在当前目录新建 "),a("code",[t._v("yobot_data")]),t._v("、 "),a("code",[t._v("gocqhttp_data")]),t._v(" 存放数据，并填写配置文件")]),t._v(" "),a("li",[t._v("新建了一个名为 "),a("code",[t._v("qqbot")]),t._v(" 的 docker 网络")]),t._v(" "),a("li",[t._v("拉取 "),a("code",[t._v("yobot/yobot:slim")]),t._v(" 镜像，创建名为 "),a("code",[t._v("yobot")]),t._v(" 的容器运行 yobot，并监听 9222 端口")]),t._v(" "),a("li",[t._v("拉取 "),a("code",[t._v("pcrbot/gocqhttp")]),t._v(" 镜像，创建名为 "),a("code",[t._v("gocqhttp")]),t._v(" 的容器运行 gocqhttp")])])]),t._v(" "),a("h2",{attrs:{id:"参考命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考命令"}},[t._v("#")]),t._v(" 参考命令")]),t._v(" "),a("p",[t._v("后期维护时，可能需要的指令")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 停止 yobot 或 gocqhttp")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker stop yobot  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 只停止 yobot")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker stop gocqhttp  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 只停止 gocqhttp")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker stop yobot gocqhttp  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 同时停止")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 启动 yobot 与 gocqhttp")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker start yobot gocqhttp\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启 yobot 与 gocqhttp")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker restart yobot gocqhttp\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看 yobot 或 gocqhttp 日志")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker logs --tail "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" yobot  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看最后20条日志")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker logs --tail "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v(" gocqhttp\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重新将 gocqhttp 命令行移回前台")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" docker attach gocqhttp\n")])])]),a("h2",{attrs:{id:"验证安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证安装"}},[t._v("#")]),t._v(" 验证安装")]),t._v(" "),a("p",[t._v("向机器人发送“version”，机器人会回复当前版本")]),t._v(" "),a("h2",{attrs:{id:"常见问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[t._v("#")]),t._v(" 常见问题")]),t._v(" "),a("p",[t._v("见"),a("RouterLink",{attrs:{to:"/usage/faq.html"}},[t._v("FAQ")])],1),t._v(" "),a("h2",{attrs:{id:"开启-web-访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开启-web-访问"}},[t._v("#")]),t._v(" 开启 web 访问")]),t._v(" "),a("p",[a("RouterLink",{attrs:{to:"/usage/web-mode.html"}},[t._v("开启方法")])],1)])}),[],!1,null,null,null);s.default=e.exports}}]);