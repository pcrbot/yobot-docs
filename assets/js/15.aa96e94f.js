(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{376:function(a,t,s){"use strict";s.r(t);var e=s(26),r=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"windows-使用-cqhttp-mirai-部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#windows-使用-cqhttp-mirai-部署"}},[a._v("#")]),a._v(" Windows 使用 cqhttp-mirai 部署")]),a._v(" "),s("h2",{attrs:{id:"部署过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署过程"}},[a._v("#")]),a._v(" 部署过程")]),a._v(" "),s("p",[a._v("本文为便携版部署方式")]),a._v(" "),s("h3",{attrs:{id:"环境准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[a._v("#")]),a._v(" 环境准备")]),a._v(" "),s("h4",{attrs:{id:"安装依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装依赖"}},[a._v("#")]),a._v(" 安装依赖")]),a._v(" "),s("p",[a._v("安装 JRE (OpenJDK 11)")]),a._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/ojdkbuild/ojdkbuild/releases/download/java-11-openjdk-11.0.8.10-1/java-11-openjdk-jre-11.0.8.10-1.windows.ojdkbuild.x86_64.msi",target:"_blank",rel:"noopener noreferrer"}},[a._v("点击下载"),s("OutboundLink")],1),a._v("，双击安装")]),a._v(" "),s("h3",{attrs:{id:"部署-yobot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署-yobot"}},[a._v("#")]),a._v(" 部署 yobot")]),a._v(" "),s("p",[a._v("下载 "),s("a",{attrs:{href:"https://yobot.lanzous.com/b00nlr3ni",target:"_blank",rel:"noopener noreferrer"}},[a._v("yobot 便携版"),s("OutboundLink")],1)]),a._v(" "),s("p",[a._v("解压后双击“yobot.exe”启动服务")]),a._v(" "),s("p",[s("img",{staticClass:"lazy",attrs:{alt:"windows下正确启动图","data-src":"/imgs/aaf38d1a5cbc1c87.jpg",loading:"lazy"}})]),a._v(" "),s("h3",{attrs:{id:"部署-mirai"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署-mirai"}},[a._v("#")]),a._v(" 部署 mirai")]),a._v(" "),s("p",[a._v("先准备如下的目录结构")]),a._v(" "),s("div",{staticClass:"language-treeview extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mirai\\\n├── libs\\\n├── config\\\n│   └── Console\\\n└── plugins\\\n    └── CQHTTPMirai\\\n")])])]),s("p",[a._v("下载 1."),s("a",{attrs:{href:"https://github.com/project-mirai/mirai-repo/raw/master/shadow/mirai-core-qqandroid/mirai-core-qqandroid-1.3.0.jar",target:"_blank",rel:"noopener noreferrer"}},[a._v("mirai-core"),s("OutboundLink")],1),a._v(" 2."),s("a",{attrs:{href:"https://github.com/project-mirai/mirai-repo/raw/master/shadow/mirai-console/mirai-console-1.0-RC-dev-28.jar",target:"_blank",rel:"noopener noreferrer"}},[a._v("mirai-console"),s("OutboundLink")],1),a._v(" 3."),s("a",{attrs:{href:"https://github.com/project-mirai/mirai-repo/raw/master/shadow/mirai-console-terminal/mirai-console-terminal-1.0-RC-dev-28.jar",target:"_blank",rel:"noopener noreferrer"}},[a._v("mirai-console-terminal"),s("OutboundLink")],1),a._v(" 三件套并放在 "),s("code",[a._v(".\\libs")]),a._v(" 目录里")]),a._v(" "),s("p",[a._v("下载 "),s("a",{attrs:{href:"https://github.com/yyuueexxiinngg/cqhttp-mirai/releases/download/0.2.3/cqhttp-mirai-0.2.3-all.jar",target:"_blank",rel:"noopener noreferrer"}},[a._v("CQHTTPMirai.jar"),s("OutboundLink")],1),a._v(" 并放在 "),s("code",[a._v(".\\plugins")]),a._v(" 目录里")]),a._v(" "),s("p",[a._v("新建 Mirai 配置文件在 "),s("code",[a._v(".\\config\\Console\\AutoLogin.yml")]),a._v("，修改配置文件如下（前面是QQ号，后面是密码）")]),a._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("plainPasswords")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("123456654321")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" example\n")])])]),s("p",[a._v("新建 CQHTTPMirai 配置文件在 "),s("code",[a._v(".\\plugins\\CQHTTPMirai\\setting.yml")]),a._v("，修改配置文件如下（注意修改 QQ 号）")]),a._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 要进行配置的QQ号 (Mirai支持多帐号登录, 故需要对每个帐号进行单独设置)")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 详细说明请参考 https://github.com/yyuueexxiinngg/cqhttp-mirai")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 如果要登录多个账号，或者一个账号连接多个后端，直接按照 yaml 格式增加字段即可")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v('"1234567890"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("ws_reverse")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("enable")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[a._v("true")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("postMessageFormat")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" string\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("reverseHost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" 127.0.0.1\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("reversePort")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("9222")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("reversePath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" /ws/\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("accessToken")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token null important"}},[a._v("null")]),a._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[a._v("reconnectInterval")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3000")]),a._v("\n")])])]),s("p",[a._v("新建入口文件在 "),s("code",[a._v(".\\start-mirai.bat")]),a._v("，内容如下")]),a._v(" "),s("div",{staticClass:"language-batch extra-class"},[s("pre",{pre:!0,attrs:{class:"language-batch"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("@")]),s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("echo")]),a._v(" off")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("title")]),a._v(" Mirai Console")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("java")]),a._v(" -cp "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"./libs/*"')]),a._v(" net.mamoe.mirai.console.terminal.MiraiConsoleTerminalLoader %*")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token command"}},[s("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("pause")])]),a._v("\n")])])]),s("p",[a._v("双击 "),s("code",[a._v("start-mirai.bat")]),a._v(" 启动 mirai")]),a._v(" "),s("p",[a._v("部署完成")]),a._v(" "),s("h2",{attrs:{id:"验证安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#验证安装"}},[a._v("#")]),a._v(" 验证安装")]),a._v(" "),s("p",[a._v("向机器人发送“version”，机器人会回复当前版本")]),a._v(" "),s("h2",{attrs:{id:"常见问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[a._v("#")]),a._v(" 常见问题")]),a._v(" "),s("p",[a._v("见"),s("RouterLink",{attrs:{to:"/usage/faq.html"}},[a._v("FAQ")])],1),a._v(" "),s("h2",{attrs:{id:"开启-web-访问"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#开启-web-访问"}},[a._v("#")]),a._v(" 开启 web 访问")]),a._v(" "),s("p",[s("RouterLink",{attrs:{to:"/usage/web-mode.html"}},[a._v("开启方法")])],1)])}),[],!1,null,null,null);t.default=r.exports}}]);